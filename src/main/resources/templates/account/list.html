<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ë‚´ ê³„ì¢Œ ëª©ë¡ - FDS BANK</title>

    <th:block th:replace="~{index :: menuStyle}"></th:block>

    <style>
        /* ì „ì²´ ìŠ¤íƒ€ì¼ ì´ˆê¸°í™” ë° ë°°ê²½ */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f7f9; }

        .container {
            max-width: 950px;
            margin: 40px auto;
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        h2 { color: #1a1a1a; margin-bottom: 25px; border-bottom: 3px solid #007bff; padding-bottom: 15px; display: flex; align-items: center; }
        h2 span { margin-left: 10px; }

        /* ë©”ì‹œì§€ ì˜ì—­ ìŠ¤íƒ€ì¼ (ìƒë‹¨ í‘œì‹œìš©) */
        .msg { color: #155724; background: #d4edda; padding: 15px; margin-bottom: 20px; border-radius: 8px; border: 1px solid #c3e6cb; }
        .error-msg { color: #721c24; background: #f8d7da; padding: 15px; margin-bottom: 20px; border-radius: 8px; border: 1px solid #f5c6cb; }

        /* í…Œì´ë¸” ìŠ¤íƒ€ì¼ */
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { padding: 15px; border-bottom: 1px solid #e9ecef; text-align: center; vertical-align: middle; }
        th { background-color: #f8f9fa; color: #495057; font-weight: 600; text-transform: uppercase; font-size: 13px; letter-spacing: 0.5px; }
        tr:hover { background-color: #f1f8ff; }

        .status-badge { background: #007bff; color: white; padding: 4px 10px; border-radius: 20px; font-size: 11px; font-weight: bold; }
        .balance-text { font-weight: bold; color: #2c3e50; font-size: 16px; }

        /* ë²„íŠ¼ ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
        .btn { display: inline-block; padding: 10px 20px; text-decoration: none; border-radius: 8px; font-weight: 600; transition: all 0.3s; font-size: 14px; border: none; cursor: pointer; }
        .btn-main { background-color: #007bff; color: white; margin-top: 10px; }
        .btn-main:hover { background-color: #0056b3; transform: translateY(-2px); }

        .btn-sm { padding: 6px 14px; font-size: 12px; margin: 2px; border-radius: 6px; color: white; display: inline-block; text-align: center; }
        .btn-deposit { background-color: #28a745; }
        .btn-withdraw { background-color: #dc3545; }
        .btn-transfer { background-color: #6c757d; }

        /* ì‚­ì œ ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì „ìš© */
        .btn-delete { background-color: #ff4d4d; }
        .btn-delete:hover { background-color: #cc0000; }

        .btn-box { margin-top: 30px; display: flex; justify-content: space-between; align-items: center; }

        .action-cell { display: flex; justify-content: center; align-items: center; gap: 4px; }
    </style>
</head>
<body>

<div th:replace="~{index :: menu}"></div>

<div class="container">
    <h2>ğŸ¦ <span>ë‚´ ê³„ì¢Œ ëª©ë¡</span></h2>

    <div class="msg" th:if="${message}" th:text="${message}"></div>
    <div class="error-msg" th:if="${error}" th:text="${error}"></div>

    <table>
        <thead>
        <tr>
            <th>ê³„ì¢Œ ë²ˆí˜¸</th>
            <th>ìƒíƒœ</th>
            <th>ì”ì•¡</th>
            <th>ìƒì„±ì¼</th>
            <th>ê´€ë¦¬ ì—…ë¬´</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="account : ${accounts}">
            <td th:text="${account.accountNumber}" style="font-family: 'Courier New', monospace; font-size: 16px; font-weight: 600;"></td>
            <td><span class="status-badge" th:text="${account.status}"></span></td>
            <td><span class="balance-text" th:text="${#numbers.formatInteger(account.balance, 3, 'COMMA')} + 'ì›'"></span></td>
            <td th:text="${#temporals.format(account.createdAt, 'yyyy-MM-dd HH:mm')}" style="color: #6c757d; font-size: 13px;"></td>
            <td class="action-cell">
                <a th:href="@{/account/deposit(accountNumber=${account.accountNumber})}" class="btn btn-sm btn-deposit">ì…ê¸ˆ</a>
                <a th:href="@{/account/withdraw(accountNumber=${account.accountNumber})}" class="btn btn-sm btn-withdraw">ì¸ì¶œ</a>
                <a th:href="@{/account/transfer(accountNumber=${account.accountNumber})}" class="btn btn-sm btn-transfer">ì†¡ê¸ˆ</a>

                <form th:action="@{/account/delete}" method="post"
                      th:onsubmit="return confirm('ì •ë§ ì´ ê³„ì¢Œë¥¼ í•´ì§€í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì”ì•¡ì´ 0ì›ì´ì–´ì•¼ í•˜ë©° ì‚­ì œ í›„ ë³µêµ¬ëŠ” ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.')"
                      style="display:inline;">
                    <input type="hidden" name="accountId" th:value="${account.accountId}">
                    <button type="submit" class="btn btn-sm btn-delete">ì‚­ì œ</button>
                </form>
            </td>
        </tr>
        <tr th:if="${#lists.isEmpty(accounts)}">
            <td colspan="5" style="padding: 40px; color: #adb5bd; font-style: italic;">ë³´ìœ í•˜ì‹  ê³„ì¢Œê°€ ì—†ìŠµë‹ˆë‹¤.</td>
        </tr>
        </tbody>
    </table>

    <div class="btn-box">
        <a th:href="@{/account/transfer}" class="btn btn-main">ğŸ’¸ ë‹¤ë¥¸ ê³„ì¢Œë¡œ ì†¡ê¸ˆí•˜ê¸°</a>
        <a th:href="@{/account/generation}" class="btn btn-main">â• ìƒˆ ê³„ì¢Œ ê°œì„¤</a>
    </div>
</div>

<script th:inline="javascript">
    /*<![CDATA[*/
    const errorMsg = /*[[${error}]]*/ null;
    const successMsg = /*[[${message}]]*/ null;

    if (errorMsg) {
        alert(errorMsg);
    }
    if (successMsg) {
        alert(successMsg);
    }
    /*]]>*/
</script>

</body>
</html>