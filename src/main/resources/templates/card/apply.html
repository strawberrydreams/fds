<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ì¹´ë“œ ë°œê¸‰ ì‹ ì²­ - FDS BANK</title>
    <th:block th:replace="~{index :: common_head('FDS BANK - ' + ${title})}"></th:block>
    <style>
        .container { max-width: 500px; margin: 50px auto; background: white; padding: 40px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        h2 { color: #007bff; text-align: center; margin-bottom: 30px; border-bottom: 3px solid #007bff; padding-bottom: 15px; }

        /* ì…ë ¥ í¼ ìŠ¤íƒ€ì¼ ë³´ê°• */
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-weight: 600; color: #4b4b4b; }

        select, input {
            width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px;
            font-size: 16px; box-sizing: border-box; transition: 0.3s;
        }
        select:focus, input:focus { border-color: #007bff; outline: none; box-shadow: 0 0 5px rgba(0,123,255,0.2); }

        /* ì½ê¸° ì „ìš©(ì¸ì¦ì™„ë£Œ) í•„ë“œ ìŠ¤íƒ€ì¼ */
        input[readonly] { background-color: #f8f9fa; color: #6c757d; cursor: not-allowed; border: 1px dashed #cbd5e0; }

        .btn-submit {
            width: 100%; padding: 15px; background-color: #007bff; color: white;
            border: none; border-radius: 8px; cursor: pointer; font-size: 18px;
            font-weight: bold; transition: 0.3s; margin-top: 10px;
        }
        .btn-submit:hover { background-color: #0056b3; transform: translateY(-2px); }

        .error-msg { color: #dc3545; background: #f8d7da; padding: 12px; border-radius: 8px; margin-bottom: 20px; text-align: center; font-size: 14px; }
        .info-header { font-weight: bold; margin-bottom: 15px; color: #007bff; display: flex; align-items: center; gap: 5px; }
    </style>
</head>
<body>

<div th:replace="~{index :: menu}"></div>

<div class="container">
    <h2>ğŸ’³ ì¹´ë“œ ë°œê¸‰ ì‹ ì²­</h2>

    <div class="error-msg" th:if="${error}" th:text="${error}"></div>

    <form th:action="@{/card/issue}" method="post">

        <div class="info-header">
            <span>âœ…</span>
            <span th:text="${userName != null && userName != ''} ? 'ì¸ì¦ëœ ì •ë³´' : 'ì •ë³´ ì§ì ‘ ì…ë ¥'">ì •ë³´ ì…ë ¥</span>
        </div>

        <div class="form-group">
            <label>ì„±í•¨</label>
            <input type="text" name="userName" th:value="${userName}"
                   th:readonly="${userName != null && userName != '' && userName != 'ë¯¸ì¸ì‹'}"
                   placeholder="ì„±í•¨ì„ ì…ë ¥í•˜ì„¸ìš”" required>
        </div>

        <div class="form-group">
            <label>ìƒë…„ì›”ì¼ (6ìë¦¬)</label>
            <input type="text" name="userBirth" th:value="${userBirth}"
                   th:readonly="${userBirth != null && userBirth != '' && userBirth != 'ë¯¸ì¸ì‹'}"
                   maxlength="6" pattern="\d{6}" placeholder="ì˜ˆ: 950101" required>
        </div>

        <hr style="margin: 30px 0; border: 0; border-top: 1px dashed #eee;">

        <div class="form-group">
            <label>ì¹´ë“œ ì¢…ë¥˜</label>
            <select name="cardType" required>
                <option value="CHECK">ì²´í¬ì¹´ë“œ (ì—°ê²°ê³„ì¢Œ ì¦‰ì‹œ ì¶œê¸ˆ)</option>
                <option value="CREDIT">ì‹ ìš©ì¹´ë“œ (í•œë„ ë‚´ ê²°ì œ)</option>
            </select>
        </div>

        <div class="form-group">
            <label>ì—°ê²°í•  ê³„ì¢Œë²ˆí˜¸</label>
            <select name="accountNumber" required>
                <option value="">-- ê³„ì¢Œë¥¼ ì„ íƒí•˜ì„¸ìš” --</option>
                <option th:each="acc : ${accounts}"
                        th:value="${acc.accountNumber}"
                        th:text="|${acc.accountNumber} (ì”ì•¡: ${#numbers.formatInteger(acc.balance, 0, 'COMMA')}ì›)|">
                </option>
            </select>
        </div>

        <div class="form-group">
            <label>ê³„ì¢Œ ë¹„ë°€ë²ˆí˜¸ (4ìë¦¬)</label>
            <input type="password" name="accountPassword" maxlength="4" pattern="\d{4}"
                   inputmode="numeric" placeholder="ì—°ê²°í•  ê³„ì¢Œì˜ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”" required>
            <p style="font-size: 11px; color: #999; margin-top: 5px;">* ë³´ì•ˆì„ ìœ„í•´ ê³„ì¢Œ ë¹„ë°€ë²ˆí˜¸ í™•ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.</p>
        </div>

        <button type="submit" class="btn-submit">ì¹´ë“œ ë°œê¸‰ ì™„ë£Œ</button>
    </form>
</div>

</body>
</html>